# æ—…è¡Œè¨˜å¸³ TravelReceipt

> iOS æ—…éŠæ”¯å‡ºç®¡ç†æ‡‰ç”¨ç¨‹å¼

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

TravelReceipt æ˜¯ä¸€æ¬¾å°ˆç‚ºæ—…è¡Œè€…è¨­è¨ˆçš„ iOS æ‡‰ç”¨ç¨‹å¼ï¼Œå”åŠ©ä½¿ç”¨è€…åœ¨æ—…é€”ä¸­è¼•é¬†è¨˜éŒ„ã€ç®¡ç†åŠåˆ†ææ”¯å‡ºã€‚é€éæ™ºæ…§æƒæç™¼ç¥¨åŠŸèƒ½èˆ‡å¤šå¹£åˆ¥æ”¯æ´ï¼Œè®“æ—…è¡Œè²¡å‹™ç®¡ç†è®Šå¾—ç°¡å–®ç›´è¦ºã€‚

---

## ğŸ¯ é–‹ç™¼å‹•æ©Ÿèˆ‡ç›®æ¨™

### å•é¡Œåˆ†æ
- æ—…è¡Œæ™‚å¸¸æœƒç´¯ç©å¤§é‡æ”¶æ“šï¼Œé›£ä»¥æ•´ç†
- è·¨åœ‹æ—…è¡Œæ¶‰åŠå¤šç¨®è²¨å¹£æ›ç®—ï¼Œè¨ˆç®—ç¹ç‘£
- äº‹å¾Œçµ±è¨ˆæ”¯å‡ºè²»æ™‚è²»åŠ›

### è§£æ±ºæ–¹æ¡ˆ
æœ¬å°ˆæ¡ˆé–‹ç™¼ä¸€æ¬¾æ•´åˆå‹æ—…éŠè¨˜å¸³ Appï¼Œæä¾›ï¼š
- å³æ™‚è¨˜éŒ„æ”¯å‡º
- è‡ªå‹•æƒæè¾¨è­˜ç™¼ç¥¨
- å¤šå¹£åˆ¥è‡ªå‹•æ›ç®—
- åœ–è¡¨åŒ–çµ±è¨ˆåˆ†æ

---

## ğŸ› ï¸ ä½¿ç”¨æŠ€è¡“

### é–‹ç™¼ç’°å¢ƒ
| é …ç›® | ç‰ˆæœ¬/è¦æ ¼ |
|------|-----------|
| é–‹ç™¼å·¥å…· | Xcode 15+ |
| ç¨‹å¼èªè¨€ | Swift 5.9 |
| æœ€ä½æ”¯æ´ç‰ˆæœ¬ | iOS 17.0 |
| å°ˆæ¡ˆé¡å‹ | SwiftUI App |

### æ ¸å¿ƒæ¡†æ¶

| æ¡†æ¶åç¨± | ç”¨é€”èªªæ˜ |
|----------|----------|
| **SwiftUI** | å®£å‘Šå¼ UI æ¡†æ¶ï¼Œå»ºæ§‹ä½¿ç”¨è€…ä»‹é¢ |
| **SwiftData** | è³‡æ–™æŒä¹…åŒ–æ¡†æ¶ï¼Œç®¡ç†æœ¬åœ°è³‡æ–™åº« |
| **CloudKit** | iCloud é›²ç«¯åŒæ­¥æœå‹™ |
| **WidgetKit** | ä¸»ç•«é¢å°å·¥å…·é–‹ç™¼ |
| **Vision** | OCR æ–‡å­—è¾¨è­˜ï¼ˆç™¼ç¥¨æƒæï¼‰ |
| **Charts** | è³‡æ–™è¦–è¦ºåŒ–åœ–è¡¨ |

### ç¬¬ä¸‰æ–¹å¥—ä»¶

| å¥—ä»¶åç¨± | ç”¨é€”èªªæ˜ |
|----------|----------|
| **SwiftDate** | æ—¥æœŸè¨ˆç®—èˆ‡æ ¼å¼åŒ–å·¥å…· |

---

## ğŸ“± åŠŸèƒ½ç‰¹è‰²

### 1. è¡Œç¨‹ç®¡ç†
- å»ºç«‹/ç·¨è¼¯/åˆªé™¤æ—…è¡Œè¡Œç¨‹
- åˆ†æ®µé¡¯ç¤ºï¼šé€²è¡Œä¸­ã€å³å°‡é–‹å§‹ã€å·²çµæŸ
- æœå°‹åŠŸèƒ½ï¼šä¾åç¨±æˆ–ç›®çš„åœ°æœå°‹

### 2. æ”¯å‡ºè¨˜éŒ„
- å¿«é€Ÿæ–°å¢æ”¯å‡ºé …ç›®
- 8 ç¨®åˆ†é¡ï¼šé¤é£²ã€äº¤é€šã€ä½å®¿ã€é€šä¿¡ã€é›œæ”¯ç­‰
- æ”¯æ´é™„åŠ æ”¶æ“šç…§ç‰‡

### 3. æ™ºèƒ½æƒæ
- OCR è‡ªå‹•è¾¨è­˜ç™¼ç¥¨é‡‘é¡
- è‡ªå‹•æ“·å–å•†å®¶åç¨±
- å°ç£é›»å­ç™¼ç¥¨ QR Code è§£æ

### 4. å¤šå¹£åˆ¥æ”¯æ´
- æ”¯æ´ TWDã€USDã€JPYã€EURã€CNY ç­‰è²¨å¹£
- è‡ªè¨‚åŒ¯ç‡è¨­å®š
- è‡ªå‹•æ›ç®—çµ±è¨ˆ

### 5. çµ±è¨ˆåˆ†æ
- åœ“é¤…åœ–é¡¯ç¤ºæ”¯å‡ºåˆ†å¸ƒ
- æ—¥å‡æ”¯å‡ºè¨ˆç®—
- CSV åŒ¯å‡ºåŠŸèƒ½

### 6. é›²ç«¯åŒæ­¥
- iCloud å³æ™‚åŒæ­¥
- å¤šè£ç½®è³‡æ–™ä¸€è‡´

### 7. ä¸»ç•«é¢å°å·¥å…·
- ä¸‰ç¨®å°ºå¯¸ï¼šå°ã€ä¸­ã€å¤§
- å³æ™‚é¡¯ç¤ºè¡Œç¨‹çµ±è¨ˆ
- äº’å‹•å¼é‡æ–°æ•´ç†æŒ‰éˆ•

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
TravelReceipt/
â”œâ”€â”€ Models/                 # è³‡æ–™æ¨¡å‹
â”‚   â”œâ”€â”€ Trip.swift          # è¡Œç¨‹æ¨¡å‹
â”‚   â”œâ”€â”€ Expense.swift       # æ”¯å‡ºæ¨¡å‹
â”‚   â”œâ”€â”€ ExpenseCategory.swift
â”‚   â””â”€â”€ SharedTripData.swift
â”‚
â”œâ”€â”€ Views/                  # è¦–åœ–å±¤
â”‚   â”œâ”€â”€ ContentView.swift   # ä¸»è¦–åœ–
â”‚   â”œâ”€â”€ TripListView.swift  # è¡Œç¨‹åˆ—è¡¨
â”‚   â”œâ”€â”€ TripDetailView.swift
â”‚   â”œâ”€â”€ AddTripView.swift
â”‚   â”œâ”€â”€ AddExpenseView.swift
â”‚   â”œâ”€â”€ StatisticsView.swift
â”‚   â””â”€â”€ SettingsView.swift
â”‚
â”œâ”€â”€ Components/             # å¯é‡ç”¨å…ƒä»¶
â”‚   â”œâ”€â”€ OCRService.swift    # OCR æœå‹™
â”‚   â”œâ”€â”€ ImagePicker.swift
â”‚   â””â”€â”€ ReceiptPhotoManager.swift
â”‚
â”œâ”€â”€ Scanner/                # æƒæåŠŸèƒ½
â”‚   â”œâ”€â”€ ReceiptScannerView.swift
â”‚   â””â”€â”€ ScanResult.swift
â”‚
â”œâ”€â”€ Parser/                 # æ–‡å­—è§£æ
â”‚   â””â”€â”€ ReceiptTextParser.swift
â”‚
â”œâ”€â”€ Utils/                  # å·¥å…·é¡
â”‚   â””â”€â”€ Double+Format.swift
â”‚
â””â”€â”€ TravelReceiptWidget/    # Widget æ“´å±•
    â”œâ”€â”€ TravelReceiptWidget.swift
    â”œâ”€â”€ SharedTripData.swift
    â””â”€â”€ RefreshIntent.swift
```

---

## ğŸ“Š è³‡æ–™æ¨¡å‹è¨­è¨ˆ

### Tripï¼ˆè¡Œç¨‹ï¼‰
```swift
@Model
class Trip {
    var id: UUID
    var name: String
    var destination: String?
    var startDate: Date
    var endDate: Date
    var totalBudget: Double?
    var primaryCurrency: String
    var exchangeRates: [String: Double]
    @Relationship var expenses: [Expense]?
}
```

### Expenseï¼ˆæ”¯å‡ºï¼‰
```swift
@Model
class Expense {
    var id: UUID
    var amount: Double
    var currency: String
    var date: Date
    var storeName: String?
    var category: ExpenseCategory
    var receiptImage: Data?
    @Relationship var trip: Trip?
}
```

---

## ğŸ”§ é—œéµæŠ€è¡“å¯¦ä½œ

### 1. SwiftData + CloudKit åŒæ­¥
```swift
let config = ModelConfiguration(
    schema: schema,
    cloudKitDatabase: .private("iCloud.com.app.TravelReceipt")
)
let container = try ModelContainer(for: schema, configurations: [config])
```

### 2. App Groups è³‡æ–™å…±äº«
ä¸» App èˆ‡ Widget é€éå…±äº«å®¹å™¨äº¤æ›è³‡æ–™ï¼š
```swift
let containerURL = FileManager.default.containerURL(
    forSecurityApplicationGroupIdentifier: "group.com.app.TravelReceipt"
)
```

### 3. Widget äº’å‹•æŒ‰éˆ• (App Intents)
```swift
struct RefreshWidgetIntent: AppIntent {
    func perform() async throws -> some IntentResult {
        WidgetCenter.shared.reloadAllTimelines()
        return .result()
    }
}
```

### 4. OCR æ–‡å­—è¾¨è­˜ (Vision)
```swift
let request = VNRecognizeTextRequest { request, error in
    let observations = request.results as? [VNRecognizedTextObservation]
    // è™•ç†è¾¨è­˜çµæœ
}
```

---

## ğŸ“¸ æ‡‰ç”¨ç¨‹å¼æˆªåœ–

| è¡Œç¨‹åˆ—è¡¨ | æ”¯å‡ºæ˜ç´° | çµ±è¨ˆåœ–è¡¨ | å°å·¥å…· |
|:--------:|:--------:|:--------:|:------:|
| åˆ†æ®µé¡¯ç¤º | åˆ†é¡è¨˜éŒ„ | åœ“é¤…åœ– | ä¸‰ç¨®å°ºå¯¸ |

---

## ğŸš€ å®‰è£èˆ‡åŸ·è¡Œ

### ç’°å¢ƒéœ€æ±‚
- macOS 14.0+
- Xcode 15.0+
- iOS 17.0+ è£ç½®æˆ–æ¨¡æ“¬å™¨
- Apple Developer å¸³è™Ÿï¼ˆiCloud åŠŸèƒ½éœ€è¦ï¼‰

### å»ºç½®æ­¥é©Ÿ
1. Clone å°ˆæ¡ˆ
   ```bash
   git clone https://github.com/your-repo/TravelReceipt.git
   ```

2. é–‹å•Ÿå°ˆæ¡ˆ
   ```bash
   open TravelReceipt.xcodeproj
   ```

3. è¨­å®šç°½ç½²
   - é¸æ“‡æ‚¨çš„ Team
   - ç¢ºèª Bundle Identifier

4. åŸ·è¡Œ
   - é¸æ“‡ç›®æ¨™è£ç½®
   - æŒ‰ä¸‹ Run (âŒ˜R)

---

## ğŸ“ é–‹ç™¼å¿ƒå¾—èˆ‡å›°é›£

### é‡åˆ°çš„æŒ‘æˆ°

1. **SwiftData + CloudKit æ•´åˆ**
   - éœ€è¦æ­£ç¢ºè¨­å®š iCloud Container å’Œ App Groups
   - åŒæ­¥æ©Ÿåˆ¶éœ€è¦æ™‚é–“ç†è§£

2. **Widget è³‡æ–™å…±äº«**
   - Widget ç„¡æ³•ç›´æ¥å­˜å–ä¸» App è³‡æ–™åº«
   - é€é App Groups å…±äº«å®¹å™¨è§£æ±º

3. **OCR è¾¨è­˜æº–ç¢ºåº¦**
   - ä¸åŒæ ¼å¼ç™¼ç¥¨è¾¨è­˜ç‡å·®ç•°å¤§
   - éœ€è¦é‡å°å¸¸è¦‹æ ¼å¼å„ªåŒ–è§£æé‚è¼¯

### å­¸ç¿’æ”¶ç©«
- æ·±å…¥ç†è§£ SwiftUI å®£å‘Šå¼ç¨‹å¼è¨­è¨ˆ
- æŒæ¡ SwiftData è³‡æ–™æŒä¹…åŒ–æŠ€è¡“
- äº†è§£ iOS Extension é–‹ç™¼æ¨¡å¼
- å¯¦ä½œ CloudKit é›²ç«¯åŒæ­¥

---

## ğŸ”® æœªä¾†å±•æœ›

- [ ] åŠ å…¥é ç®—è­¦ç¤ºé€šçŸ¥
- [ ] æ”¯æ´æ›´å¤šè²¨å¹£å³æ™‚åŒ¯ç‡ API
- [ ] æ•´åˆç³»çµ±è¡Œäº‹æ›† (EventKit)
- [ ] åŠ å…¥è¡Œç¨‹åœ°åœ–æ¨™è¨˜
- [ ] Apple Watch ç‰ˆæœ¬

---

## ğŸ‘¥ é–‹ç™¼åœ˜éšŠ

| å§“å | å­¸è™Ÿ | è² è²¬é …ç›® |
|------|------|----------|
| YiJou | XXXXXXXX | å…¨ç«¯é–‹ç™¼ |

---

## ğŸ“„ æˆæ¬Šæ¢æ¬¾

æœ¬å°ˆæ¡ˆåƒ…ä¾›å­¸è¡“ç ”ç©¶ä½¿ç”¨ã€‚

---

## ğŸ“š åƒè€ƒè³‡æ–™

1. [Apple Developer Documentation - SwiftUI](https://developer.apple.com/documentation/swiftui)
2. [Apple Developer Documentation - SwiftData](https://developer.apple.com/documentation/swiftdata)
3. [Apple Developer Documentation - WidgetKit](https://developer.apple.com/documentation/widgetkit)
4. [SwiftDate GitHub Repository](https://github.com/malcommac/SwiftDate)

---

*æœ€å¾Œæ›´æ–°ï¼š2025 å¹´ 12 æœˆ*